<!doctype html>
<html lang="en">
<head><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1"><meta name="generator" content="Hugo 0.69.0" />
<link rel="apple-touch-icon" sizes="180x180" href='/favicons/apple-touch-icon.png'>
<link rel="icon" type="image/png" sizes="32x32" href='/favicons/favicon-32x32.png'>
<link rel="icon" type="image/png" sizes="16x16" href='/favicons/favicon-16x16.png'>
<link rel="manifest" href='/favicons/site.webmanifest'>
<link rel="mask-icon" href='/favicons/safari-pinned-tab.svg'  color="#004750">
<link rel="shortcut icon" href='/favicons/favicon.ico'>
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-config" content='/favicons/browserconfig.xml'>
<meta name="theme-color" content="#ffffff">

<title>Twitter Topics - Gritty Edition | rjfranssen</title><meta property="og:title" content="Twitter Topics - Gritty Edition" />
<meta property="og:description" content="This is how the shortcodes would look like in action
" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/docs/twitter-sentiment-gritty/" />

<meta itemprop="name" content="Twitter Topics - Gritty Edition">
<meta itemprop="description" content="This is how the shortcodes would look like in action
">

<meta itemprop="wordCount" content="929">



<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Twitter Topics - Gritty Edition"/>
<meta name="twitter:description" content="This is how the shortcodes would look like in action
"/>



<link rel="stylesheet" href="/css/styles.69832e4c6e36908110aac09480bc33c2fa3c11ac6d26d5ad4dce56911af6bd9c8d22888b83f35eaa93b258e9ab5fee9510c6b997fd63be1b42c0f74b8b61faf9.css" integrity="sha512-aYMuTG42kIEQqsCUgLwzwvo8EaxtJtWtTc5WkRr2vZyNIoiLg/NeqpOyWOmrX&#43;6VEMa5l/1jvhtCwPdLi2H6&#43;Q==" crossorigin="anonymous">

</head>
<body class="page-page">
  <header class="nav_header">
<nav class="wrap nav menu">
	<a href="/" class="nav_brand">
		<picture data-lit="/images/rjfranssen-blowfish-wide-dark.png" data-dark="/images/rjfranssen-blowfish-wide-dark.png">
			
			<img srcset = '/images/rjfranssen-blowfish-wide-dark.png' alt = 'rjfranssen Logo'>
		</picture>
		<label class="nav_toggle toggle" title="Site Menu" role="button">
			<svg class="icon">
  <use xlink:href="#harmburger"></use>
</svg>
		</label>
	</a>
	<ul class="nav_body">
		<li class="nav-item">
<div class="search">
  <label for="find" class="search_label"><svg class="icon">
  <use xlink:href="#search"></use>
</svg>
  </label>
  <input type="search" class="search_field" placeholder="Search..." id="find" autocomplete="off">
  <div class="search_results"></div>
</div>



		</li>
		<li class="nav-item">
			<a class="nav-link" href="/docs/"><span>Docs</span></a>
		</li>
		<li class="nav-item">
			<a class="nav-link" href="/post/"><span>Articles</span></a>
		</li>
		<li class="nav-item">
			<a class="nav-link" href="/about/"><span>About</span></a>
		</li>
		<li class="nav-item">
			<a class="nav-link" href="/links/list/"><span>Links</span></a>
		</li>
		<li class="nav-item">
			<a class="nav-link" href="/dash/"><span>Dash</span></a>
		</li>
		
		<li class="nav-item">
			<a class="nav-link" href="https://github.com/rjfranssen/rjfranssen.github.io" target="_blank">GitHub</a>
		</li>
		<li class="nav-item"><div class = 'color_mode'>
  <label for = 'mode'></label>
  <input type = 'checkbox' class = 'color_choice' id = 'mode' title="Toggle Dark Mode">
</div>
</li>
	</ul>
</nav>

  </header>
  <div class="main wrap pt-4"><div class="grid-auto"><aside class="aside menu">
  <div>
    <label class="aside_toggle toggle" title="Docs Menu" role="button">Docs Menu <svg class="icon">
  <use xlink:href="#harmburger"></use>
</svg></label>
  </div>
  <section class="section aside_inner">
    <h2 class="section_title"><a  href="/docs/" class="group">Getting Started</a></h2>
      <section class="" id="docs-getting-started">
        <h3 class="section_link"><a id="docs-overview" href="/docs/overview/">Overview</a></h3><nav id="TableOfContents"></nav>
        <h3 class="section_link"><a id="docs-shortcodes" href="/docs/shortcodes/">Shortcodes</a></h3><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#block">Block</a></li>
        <li><a href="#column">Column</a></li>
        <li><a href="#video">Video</a></li>
        <li><a href="#button">Button</a></li>
        <li><a href="#picture">Picture</a></li>
      </ul>
    </li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-shortcodesr" href="/docs/shortcodesr/">ShortcodesR</a></h3>
        <h3 class="section_link"><a id="docs-shortcodes-applied" href="/docs/shortcodes-applied/">Shortcodes Applied</a></h3><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#using-blocks-columns--buttons">Using blocks, columns &amp; buttons</a></li>
        <li><a href="#youtube">Youtube</a></li>
      </ul>
    </li>
    <li><a href="#picture">Picture</a></li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-shortcodes-applied" href="/docs/shortcodes-appliedr/">Shortcodes Applied</a></h3>
        <h3 class="section_link active"><a id="docs-twitter-topics---gritty-edition" href="/docs/twitter-sentiment-gritty/">Twitter Topics - Gritty Edition</a></h3>
      </section>
  </section>
</aside>

  <main class="content">
    <h1>Twitter Topics - Gritty Edition</h1>
<link href="/rmarkdown-libs/anchor-sections/anchor-sections.css" rel="stylesheet" />
<script src="/rmarkdown-libs/anchor-sections/anchor-sections.js"></script>


<!-- Reference: https://gist.github.com/bryangoodrich/7b5ef683ce8db592669e -->
<!-- # Twitter Topic Modeling Using R -->
<!-- # Author: Bryan Goodrich -->
<div id="load-libraries" class="section level3">
<h3>Load libraries</h3>
<pre class="r"><code>library(twitteR)
## Warning: package &#39;twitteR&#39; was built under R version 4.0.3
library(NLP)
## Warning: package &#39;NLP&#39; was built under R version 4.0.3
library(tm)
## Warning: package &#39;tm&#39; was built under R version 4.0.3
library(RColorBrewer)
library(wordcloud)
## Warning: package &#39;wordcloud&#39; was built under R version 4.0.3
library(topicmodels)
## Warning: package &#39;topicmodels&#39; was built under R version 4.0.3
library(SnowballC)
## Warning: package &#39;SnowballC&#39; was built under R version 4.0.3
library(config)
## Warning: package &#39;config&#39; was built under R version 4.0.3
## 
## Attaching package: &#39;config&#39;
## The following objects are masked from &#39;package:base&#39;:
## 
##     get, merge</code></pre>
</div>
<div id="populate-with-your-httpsapps.twitter.com-application-information-to-use-my_setup-to-register-your-session.-no-you-cannot-see-mine" class="section level1">
<h1>Populate with your <a href="https://apps.twitter.com" class="uri">https://apps.twitter.com</a> application information to use my_setup() to register your session. No, you cannot see mine!</h1>
<p>If you haven’t used <code>config</code> before, check out the <a href="https://cran.r-project.org/web/packages/config/vignettes/introduction.html">documentation</a>. It’s a good way to import keys or passwords without sharing them public (just make sure they’re covered by your <code>.gitignore</code>!) <em>Note: Also add to <code>ignoreFiles</code> parameter in the <code>config.toml</code> if using hugo</em></p>
<pre class="r"><code>config &lt;- config::get(file = &#39;config.yml&#39;)
## Warning in readLines(con): incomplete final line found on &#39;C:
## \Users\rober\Documents\github\rjfranssen.github.io\content\docs\config.yml&#39;
config$trials
## [1] 5
config$dataset
## [1] &quot;data-sampled.csv&quot;

my_config &lt;- function() {
    ckey = &quot;Your Consumer Key Here&quot;
    csec = &quot;Your Consumer Secret Here&quot;
    akey = &quot;Your Access Token Here&quot;
    asec = &quot;Your Access Token Secret Here&quot;
  
    setup_twitter_oauth(ckey, csec, akey, asec)  
}</code></pre>
</div>
<div id="convenience-function-for-accessing-the-text-part-of-a-tweet" class="section level1">
<h1>Convenience function for accessing the text part of a tweet</h1>
</div>
<div id="returned-by-the-twitter-api.-is-used-below." class="section level1">
<h1>returned by the twitteR API. Is used below.</h1>
<p>tweet_text &lt;- function(x) x$getText()</p>
</div>
<div id="submit-a-search-query-terms-separated-by-and-get-a-return" class="section level1">
<h1>Submit a search query (terms separated by “+”) and get a return</h1>
</div>
<div id="set-of-data-corpus." class="section level1">
<h1>set of data (corpus).</h1>
<p>tweet_corpus &lt;- function(search, n = 5000, …) {
payload &lt;- searchTwitter(search, n = n, …)
sapply(payload, tweet_text)
}</p>
</div>
<div id="search-for-some-key-terms-try-to-grab-a-lot-if-you-want.-twitter-will" class="section level1">
<h1>Search for some key terms, try to grab a lot if you want. Twitter will</h1>
</div>
<div id="limit-you-as-it-sees-fit-can-find.-also-has-spatial-options." class="section level1">
<h1>limit you as it sees fit (can find). Also has spatial options.</h1>
</div>
<div id="try-these-sacramento-coordinates-38.630404-121.29353550mi" class="section level1">
<h1>Try these Sacramento coordinates: ‘38.630404,-121.293535,50mi’</h1>
<p>my_setup() # Setup the login for this session
tweets &lt;- tweet_corpus(“energy+electricity”, n = 10000, lang = ‘en’)</p>
</div>
<div id="save-your-corpus-because-youre-limited-in-how-often-you-can-do-this-for-free" class="section level1">
<h1>Save your corpus (because you’re limited in how often you can do this for free!)</h1>
<p>saveRDS(tweets, file = “Workspace/energy_themes/tweets.Rds”, compress = ‘xz’)</p>
</div>
<div id="okay-read-that-corpus-back-in-from-disk.-im-sure-you-have-a" class="section level1">
<h1>Okay, read that corpus back in from disk. I’m sure you have a</h1>
</div>
<div id="different-save-location-right" class="section level1">
<h1>different save location, right?</h1>
<p>tweets &lt;- readRDS(“Workspace/energy_themes/tweets.Rds”)</p>
</div>
<div id="okay-heres-where-things-get-tricky.-see-references-for-examples." class="section level1">
<h1>Okay, here’s where things get tricky. See references for examples.</h1>
</div>
<div id="problems-depends-if-your-system-is-using-parallel-processing.-if" class="section level1">
<h1>Problems? Depends if your system is using parallel processing. If</h1>
</div>
<div id="it-is-youll-need-to-use-mc.cores-parameters-as-shown-later.-that" class="section level1">
<h1>it is, you’ll need to use mc.cores parameters as shown later. That</h1>
</div>
<div id="took-me-awhile-to-get-thanks-to-the-references-for-clearing-that-up." class="section level1">
<h1>took me awhile to get! Thanks to the references for clearing that up.</h1>
</div>
<div id="here-we-pre-process-the-data-in-some-standard-ways.-ill-post-define-each-step" class="section level1">
<h1>Here we pre-process the data in some standard ways. I’ll post-define each step</h1>
<p>tweets &lt;- iconv(tweets, to = “ASCII”, sub = " “) # Convert to basic ASCII text to avoid silly characters
tweets &lt;- tolower(tweets) # Make everything consistently lower case
tweets &lt;- gsub(”rt“,” “, tweets) # Remove the”RT" (retweet) so duplicates are duplicates
tweets &lt;- gsub(“@\w+”, " “, tweets) # Remove user names (all proper names if you’re wise!)
tweets &lt;- gsub(”http.+ |http.+$“,” “, tweets) # Remove links
tweets &lt;- gsub(”[[:punct:]]“,” “, tweets) # Remove punctuation
tweets &lt;- gsub(”[ |{2,}“,” “, tweets) # Remove tabs
tweets &lt;- gsub(”amp“,” “, tweets) #”&amp;" is “&amp;amp” in HTML, so after punctuation removed …
tweets &lt;- gsub(“^”, "“, tweets) # Leading blanks
tweets &lt;- gsub(” $“,”“, tweets) # Lagging blanks
tweets &lt;- gsub(” +“,” ", tweets) # General spaces (should just do all whitespaces no?)
tweets &lt;- unique(tweets) # Now get rid of duplicates!</p>
</div>
<div id="convert-to-tm-corpus-and-use-its-api-for-some-additional-fun" class="section level1">
<h1>Convert to tm corpus and use its API for some additional fun</h1>
<p>corpus &lt;- Corpus(VectorSource(tweets)) # Create corpus object</p>
</div>
<div id="remove-english-stop-words.-this-could-be-greatly-expanded" class="section level1">
<h1>Remove English stop words. This could be greatly expanded!</h1>
</div>
<div id="dont-forget-the-mc.cores-thing" class="section level1">
<h1>Don’t forget the mc.cores thing</h1>
<p>corpus &lt;- tm_map(corpus, removeWords, stopwords(“en”), mc.cores=1)</p>
</div>
<div id="remove-numbers.-this-could-have-been-done-earlier-of-course." class="section level1">
<h1>Remove numbers. This could have been done earlier, of course.</h1>
<p>corpus &lt;- tm_map(corpus, removeNumbers, mc.cores=1)</p>
</div>
<div id="stem-the-words.-google-if-you-dont-understand" class="section level1">
<h1>Stem the words. Google if you don’t understand</h1>
<p>corpus &lt;- tm_map(corpus, stemDocument, mc.cores=1)</p>
</div>
<div id="remove-the-stems-associated-with-our-search-terms" class="section level1">
<h1>Remove the stems associated with our search terms!</h1>
<p>corpus &lt;- tm_map(corpus, removeWords, c(“energi”, “electr”), mc.cores=1)</p>
</div>
<div id="why-not-visualize-the-corpus-now" class="section level1">
<h1>Why not visualize the corpus now?</h1>
</div>
<div id="mine-had-a-lot-to-do-with-solar-power-renew-new-can-save-suppl-wind-price-use" class="section level1">
<h1>Mine had a lot to do with {solar, power, renew, new, can, save, suppl, wind, price, use}</h1>
<p>pal &lt;- brewer.pal(8, “Dark2”)
wordcloud(corpus, min.freq=2, max.words = 150, random.order = TRUE, col = pal)</p>
</div>
<div id="now-for-topic-modeling" class="section level1">
<h1>Now for Topic Modeling</h1>
</div>
<div id="get-the-lengths-and-make-sure-we-only-create-a-dtm-for-tweets-with" class="section level1">
<h1>Get the lengths and make sure we only create a DTM for tweets with</h1>
</div>
<div id="some-actual-content" class="section level1">
<h1>some actual content</h1>
<p>doc.lengths &lt;- rowSums(as.matrix(DocumentTermMatrix(corpus)))
dtm &lt;- DocumentTermMatrix(corpus[doc.lengths &gt; 0])
# model &lt;- LDA(dtm, 10) # Go ahead and test a simple model if you want</p>
</div>
<div id="now-for-some-topics" class="section level1">
<h1>Now for some topics</h1>
<p>SEED = sample(1:1000000, 1) # Pick a random seed for replication
k = 10 # Let’s start with 10 topics</p>
</div>
<div id="this-might-take-a-minute" class="section level1">
<h1>This might take a minute!</h1>
<p>models &lt;- list(
CTM = CTM(dtm, k = k, control = list(seed = SEED, var = list(tol = 10^-4), em = list(tol = 10^-3))),
VEM = LDA(dtm, k = k, control = list(seed = SEED)),
VEM_Fixed = LDA(dtm, k = k, control = list(estimate.alpha = FALSE, seed = SEED)),
Gibbs = LDA(dtm, k = k, method = “Gibbs”, control = list(seed = SEED, burnin = 1000,
thin = 100, iter = 1000))
)</p>
</div>
<div id="there-you-have-it.-models-now-holds-4-topics.-see-the-topicmodels-api-documentation-for-details" class="section level1">
<h1>There you have it. Models now holds 4 topics. See the topicmodels API documentation for details</h1>
</div>
<div id="top-10-terms-of-each-topic-for-each-model" class="section level1">
<h1>Top 10 terms of each topic for each model</h1>
</div>
<div id="do-you-see-any-themes-you-can-label-to-these-topics-lists-of-words" class="section level1">
<h1>Do you see any themes you can label to these “topics” (lists of words)?</h1>
<p>lapply(models, terms, 10)</p>
</div>
<div id="matrix-of-tweet-assignments-to-predominate-topic-on-that-tweet" class="section level1">
<h1>matrix of tweet assignments to predominate topic on that tweet</h1>
</div>
<div id="for-each-of-the-models-in-case-you-wanted-to-categorize-them" class="section level1">
<h1>for each of the models, in case you wanted to categorize them</h1>
<p>assignments &lt;- sapply(models, topics)</p>
<p><span class="citation">@rjfranssen</span></p>
<p>Leave a comment
No file chosen
Attach files by dragging &amp; dropping, selecting or pasting them.
© 2020 GitHub, Inc.
Terms
Privacy
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About</p>
</div>

    <div class="pager">
  
  <div class="pager_item prev">
    
    <a href="/docs/shortcodes-appliedr/" class="pager_link button" title="Shortcodes Applied">
      <span class="pager_label">Shortcodes Applied</span>
    </a>
  </div>
  

  
  <div class="pager_item next">
    
    <a href="/2015/07/23/hello-r-markdown/" class="pager_link button" title="Hello R Markdown">
      <span class="pager_label">Hello R Markdown</span>
    </a>
  </div>
  
</div>
<svg width="0" height="0" class="hidden">
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 492.004 492.004" id="next">
    <path d="M484.14 226.886L306.46 49.202c-5.072-5.072-11.832-7.856-19.04-7.856-7.216 0-13.972 2.788-19.044 7.856l-16.132 16.136c-5.068 5.064-7.86 11.828-7.86 19.04 0 7.208 2.792 14.2 7.86 19.264L355.9 207.526H26.58C11.732 207.526 0 219.15 0 234.002v22.812c0 14.852 11.732 27.648 26.58 27.648h330.496L252.248 388.926c-5.068 5.072-7.86 11.652-7.86 18.864 0 7.204 2.792 13.88 7.86 18.948l16.132 16.084c5.072 5.072 11.828 7.836 19.044 7.836 7.208 0 13.968-2.8 19.04-7.872l177.68-177.68c5.084-5.088 7.88-11.88 7.86-19.1.016-7.244-2.776-14.04-7.864-19.12z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 511.999 511.999" id="search">
    <path d="M508.874 478.708L360.142 329.976c28.21-34.827 45.191-79.103 45.191-127.309C405.333 90.917 314.416 0 202.666 0S0 90.917 0 202.667s90.917 202.667 202.667 202.667c48.206 0 92.482-16.982 127.309-45.191l148.732 148.732c4.167 4.165 10.919 4.165 15.086 0l15.081-15.082c4.165-4.166 4.165-10.92-.001-15.085zM202.667 362.667c-88.229 0-160-71.771-160-160s71.771-160 160-160 160 71.771 160 160-71.771 160-160 160z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 241 179" id="harmburger">
    <path d="M1 10C1 4.477 5.477 0 11 0h220c5.523 0 10 4.477 10 10s-4.477 10-10 10H11C5.477 20 1 15.523 1 10zm0 80c0-5.523 4.477-10 10-10h220c5.523 0 10 4.477 10 10s-4.477 10-10 10H11c-5.523 0-10-4.477-10-10zm9 69c-5.523 0-10 4.477-10 10s4.477 10 10 10h220c5.523 0 10-4.477 10-10s-4.477-10-10-10H10z"></path>
  </symbol>
</svg>
  </main>
</div>

  </div>
<footer class="pt-2 pb-2">
  <div class="wrap">
    <p>&copy; 2020 rjfranssen</p>
  </div>
</footer>


<svg width="0" height="0" class="hidden">
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 492.004 492.004" id="next">
    <path d="M484.14 226.886L306.46 49.202c-5.072-5.072-11.832-7.856-19.04-7.856-7.216 0-13.972 2.788-19.044 7.856l-16.132 16.136c-5.068 5.064-7.86 11.828-7.86 19.04 0 7.208 2.792 14.2 7.86 19.264L355.9 207.526H26.58C11.732 207.526 0 219.15 0 234.002v22.812c0 14.852 11.732 27.648 26.58 27.648h330.496L252.248 388.926c-5.068 5.072-7.86 11.652-7.86 18.864 0 7.204 2.792 13.88 7.86 18.948l16.132 16.084c5.072 5.072 11.828 7.836 19.044 7.836 7.208 0 13.968-2.8 19.04-7.872l177.68-177.68c5.084-5.088 7.88-11.88 7.86-19.1.016-7.244-2.776-14.04-7.864-19.12z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 511.999 511.999" id="search">
    <path d="M508.874 478.708L360.142 329.976c28.21-34.827 45.191-79.103 45.191-127.309C405.333 90.917 314.416 0 202.666 0S0 90.917 0 202.667s90.917 202.667 202.667 202.667c48.206 0 92.482-16.982 127.309-45.191l148.732 148.732c4.167 4.165 10.919 4.165 15.086 0l15.081-15.082c4.165-4.166 4.165-10.92-.001-15.085zM202.667 362.667c-88.229 0-160-71.771-160-160s71.771-160 160-160 160 71.771 160 160-71.771 160-160 160z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 241 179" id="harmburger">
    <path d="M1 10C1 4.477 5.477 0 11 0h220c5.523 0 10 4.477 10 10s-4.477 10-10 10H11C5.477 20 1 15.523 1 10zm0 80c0-5.523 4.477-10 10-10h220c5.523 0 10 4.477 10 10s-4.477 10-10 10H11c-5.523 0-10-4.477-10-10zm9 69c-5.523 0-10 4.477-10 10s4.477 10 10 10h220c5.523 0 10-4.477 10-10s-4.477-10-10-10H10z"></path>
  </symbol>
</svg>
<script src="/js/bundle.min.02545d1b796e3dc21ed6179e9cc71c1d0b6d8c842047dcfe72785cc4fc15f2a09cefa8fc9a8ed491e8e9fb30fcec32ea64c411ddf411e3e8c681f189dffc64fa.js"></script>
<script src="/js/search.min.f230071c2f89600c0a2ec05b3bec196e93e01defdc6e82c8c18b134912d2b3dc89a7fbd53272f4393b5e0aa7b0e84f5cf27ae3119b70fa3087e3559e729cebbd.js" async defer></script>

</body>
</html>
